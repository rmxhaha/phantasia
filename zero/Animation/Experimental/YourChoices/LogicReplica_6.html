<html><body><canvas id=canvas width=1000 height=600></canvas><div id=log></div><script>var ctx = document.getElementById("canvas").getContext("2d");var img;var t = 0;var dur = 1000;var wx = 600;var dx = 500;var wy = 100;var dy = 100;var trail_length = 2;var trail_delay_time = 30;var SeeSaw = function(p) {	if( p < 0.5 ){		return 0.5 * Math.pow( 2, 10 * ( p * 2 - 1 ) );	} else {		return 0.5 * (2 - Math.pow(2, -10 * ( p * 2 - 1 )));	}}var Deaccel = function(p) {	return 1 - Math.pow(2, -10 * p);}var Accel = function(p) {	return Math.pow(2, 10 * (p - 1)) - 0.0001;}var CustomDeaccel = function(p){	return 1 - p*p*p*p;}var CustomAccel = function(p){	// y = 1-(x-1)^4	return 1 - Math.pow( p - 1, 4 );}var Logic = function ( p ){	// y = 1-(2*x-1)^4	return 1 - Math.pow( 2*p - 1, 2 );}function infinite(){	wx -= ( SeeSaw( (t+20) / dur ) - SeeSaw( t / dur ) ) * dx;	wy -= ( SeeSaw( (t+20) / dur ) - SeeSaw( t / dur ) ) * dy;	if( t <= dur + trail_length * trail_delay_time ){		ctx.globalAlpha = 1;		ctx.fillStyle = "#FFF";		ctx.fillRect( 0, 0, 1000, 600 );		for( var i = trail_length; --i; ){			var trail_T = t - i * trail_delay_time;			var trail_TR = trail_T / dur;						if( 0 <= trail_T && trail_T <= dur ){				ctx.globalAlpha = 0.4 * ( trail_TR < 0.5  ? CustomAccel( trail_TR * 2 ) : CustomDeaccel( trail_TR * 2 ));				document.getElementById("log").innerHTML += trail_TR +"<BR>";				var __x = 600 - ( SeeSaw( trail_TR ) ) * dx;				var __y = 100 - ( SeeSaw( trail_TR ) ) * dy;								ctx.drawImage(					img, 0, 550,450,200, 					__x, __y, 450,200 				);						}		}		ctx.globalAlpha = 1;		ctx.drawImage(			img, 0, 550,450,200, 			wx, wy, 450,200 		);				t += 20;		setTimeout( "infinite()", 20 );	}}window.onload = function(){	img = new Image();	img.src = "Whale_Fast_sketch_2.png";	img.onload = function(){ 		infinite();	}}</script></body></html>